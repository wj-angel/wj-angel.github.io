<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <title> 华为帐号-使用手机号注册</title>
    <link rel="stylesheet" type="text/css" href="css/register.css">
    
</head>
<body>
    <div class="box">
        <div id="baseAgrBox" class="actionbar">
            使用手机号注册
        </div>
        <div class="marginL-R wrapRegister-padding16">
            <div id="chooseCountry">
                <div class="countryCode flexLayout">
                    <div class="countryCode-content">
                        <div class="countryCodeH-EMUI5 countryCideH-EMUI5-up medium">
                            国家/地区
                        </div>
                    </div>
                    <div class="flexItemRight text-right selectedCountry-text">
                        <span id="selectedCountry" class="selectedCountryName">
                            中国  +86
                        </span>
                    </div>
                    <div class="r">	         	
                        <span class="item-value item-forward-userAgr"></span>
                        <div id="selectCountryCodeDiv"></div>
                    </div>
                </div>
            </div>
            <div class="dinput">
                <input name="phonea" class="i1" type="text" placeholder="手机号"/>
                <div class="text-input t1"></div>
                <p class="error p1">手机号不正确</p>
            </div>
            <div class="geetest btn1">
                <span><b></b></span>
                <p>点击按钮进行验证</p>
            </div>
            <div class="geetest btn2">
                <span></span>
                <p>验证成功</p>
            </div>
            <div class="dinput">
                <input type="text" placeholder="短信验证"/>
                <span>获取验证码</span>
                <div class="text-input t2"></div>
            </div>
            <div class="dinput">
                <input name="pass" class="i4" type="password" placeholder="密码"/>
                <input class="i6" type="text" placeholder="密码"/>
                <span class="mimaspan"><img src="img/pass.png"/></span>
                <div class="text-input t3"></div>
                <p class="error p4">6-20个字符，由字母、数字和符号的两种以上组合</p>
            </div>
            <div class="dinput">
                <input class="i5" type="password" placeholder="确认密码"/>
                <input class="i7" type="text" placeholder="确认密码"/>
                <div class="text-input t4"></div>
                <p class="error p5">密码与确认密码不一致</p>
            </div>
            <div class="pd">
                <p>至少 8 个字符，不能含有空格。字母、数字、符号至少包含2种。</p>
            </div>
        </div>
        <div class="xian"></div>
        <div class="youjian">
            <a href="#">使用邮件地址注册</a>
            <a href="#">若使用邮件地址注册，您仍需为帐号提供一个安全手机号用于验证身份。</a>
        </div>
        <div class="twoA">
            <a id="firstA" href="huaweiNotice.html">上一步</a>
            <a id="lastA" href="#">完成</a>
        </div>
    </div>
</body>
</html>
<script type="text/javascript" src="js/register.js"></script>
<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
<script type="text/javascript">
 $(".i1").blur(
        function(){
            var reg = /^1[3-9]\d{9}/i;
            var str=$(this).val();
            if(!reg.test(str)){
                $(".p1").css({
                    "display":"block"
                })
                $(".t1").css({
                    "border":"0.5px solid #fa2a2d"
                })
            }else{
                $(".p1").css({
                    "display":"none"
                })
                $(".t1").css({
                    "border":"0.5px solid #e6e6e6"
                })
            }
            
        }

    );
$(".i4").blur(function(){
        var ret= /^[a-zA-Z0-9]{6,16}$/i;
        if(!ret.test($(this).val())){
            $(".p4").css({
                "display":"block"
            })
            $(".t3").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p4").css({
                "display":"none"
            })
            $(".t3").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    });
    $(".i6").blur(function(){
        var ret= /^[a-zA-Z0-9]{6,16}$/i;
        if(!ret.test($(this).val())){
            $(".p4").css({
                "display":"block"
            })
            $(".t3").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p4").css({
                "display":"none"
            })
            $(".t3").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    });
    $(".i5").blur(function(){
        if($(this).val()!=$(".i4").val()){
            $(".p5").css({
                "display":"block"
            })
            $(".t4").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p5").css({
                "display":"none"
            })
            $(".t4").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    })
    $(".i7").blur(function(){
        if($(this).val()!=$(".i6").val()){
            $(".p5").css({
                "display":"block"
            })
            $(".t4").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p5").css({
                "display":"none"
            })
            $(".t4").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    })
    $(".mimaspan").toggle(
        function(){
            $(".mimaspan img").attr("src", "img/password.png");
            $(".i4").css({
                "display":"none"
            })
            $(".i5").css({
                "display":"none"
            })
            $(".i6").css({
                "display":"block"
            })
            $(".i7").css({
                "display":"block"
            })
            $(".i6").val($(".i4").val())
            $(".i7").val($(".i5").val())
        
            // console.log("i4----"+$(".i4").val())
            // console.log("i6----"+$(".i6").val())
            // console.log("i5----"+$(".i5").val())
            // console.log("i7----"+$(".i7").val())
        },
        function(){
            
            $(".mimaspan img").attr("src", "img/pass.png");
            $(".i4").css({
                "display":"block"
            })
            $(".i5").css({
                "display":"block"
            })
            $(".i6").css({
                "display":"none"
            })
            $(".i7").css({
                "display":"none"
            })
            $(".i4").val($(".i6").val())
            $(".i5").val($(".i7").val())
            
        }
    
    )
    $(".btn1").click(function(){
        $(this).css({"display":"none"});
        $(".btn2").css({"display":"block"});
    })
    $(".i5").blur(function(){
        if($(this).val()!=null){
            $("#firstA").css({
                "border":"1px solid #efefef",
                "color":"#b9b9b9"
            })
            $("#lastA").css({
                "border":"1px solid #cccccc",
                "color": "#191919"
            })
        }
    })
    $(".i7").blur(function(){
        if($(this).val()!=null){
            $("#firstA").css({
                "border":"1px solid #efefef",
                "color":"#b9b9b9"
            })
            $("#lastA").css({
                "border":"1px solid #cccccc",
                "color": "#191919"
            })
        }
    });
    $(".i1").blur(
        function(){
            var reg = /^1[3-9]\d{9}/i;
            var str=$(this).val();
            if(!reg.test(str)){
                $(".p1").css({
                    "display":"block"
                })
                $(".t1").css({
                    "border":"0.5px solid #fa2a2d"
                })
            }else{
                $(".p1").css({
                    "display":"none"
                })
                $(".t1").css({
                    "border":"0.5px solid #e6e6e6"
                })
            }
            
        }

    );
    $(".i4").blur(function(){
        var ret= /^[a-zA-Z0-9]{6,16}$/i;
        if(!ret.test($(this).val())){
            $(".p4").css({
                "display":"block"
            })
            $(".t3").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p4").css({
                "display":"none"
            })
            $(".t3").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    });
    $(".i6").blur(function(){
        var ret= /^[a-zA-Z0-9]{6,16}$/i;
        if(!ret.test($(this).val())){
            $(".p4").css({
                "display":"block"
            })
            $(".t3").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p4").css({
                "display":"none"
            })
            $(".t3").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    });
    $(".i5").blur(function(){
        if($(this).val()!=$(".i4").val()){
            $(".p5").css({
                "display":"block"
            })
            $(".t4").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p5").css({
                "display":"none"
            })
            $(".t4").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    })
    $(".i7").blur(function(){
        if($(this).val()!=$(".i6").val()){
            $(".p5").css({
                "display":"block"
            })
            $(".t4").css({
                "border":"0.5px solid #fa2a2d"
            })
        }else{
            $(".p5").css({
                "display":"none"
            })
            $(".t4").css({
                "border":"0.5px solid #e6e6e6"
            })
        }
    })
    $(".mimaspan").toggle(
        function(){
            $(".mimaspan img").attr("src", "img/password.png");
            $(".i4").css({
                "display":"none"
            })
            $(".i5").css({
                "display":"none"
            })
            $(".i6").css({
                "display":"block"
            })
            $(".i7").css({
                "display":"block"
            })
            $(".i6").val($(".i4").val())
            $(".i7").val($(".i5").val())
        
            // console.log("i4----"+$(".i4").val())
            // console.log("i6----"+$(".i6").val())
            // console.log("i5----"+$(".i5").val())
            // console.log("i7----"+$(".i7").val())
        },
        function(){
            
            $(".mimaspan img").attr("src", "img/pass.png");
            $(".i4").css({
                "display":"block"
            })
            $(".i5").css({
                "display":"block"
            })
            $(".i6").css({
                "display":"none"
            })
            $(".i7").css({
                "display":"none"
            })
            $(".i4").val($(".i6").val())
            $(".i5").val($(".i7").val())
            
        }
    
    )
    $(".btn1").click(function(){
        $(this).css({"display":"none"});
        $(".btn2").css({"display":"block"});
    })
    $(".i5").blur(function(){
        if($(this).val()!=null){
            $("#firstA").css({
                "border":"1px solid #efefef",
                "color":"#b9b9b9"
            })
            $("#lastA").css({
                "border":"1px solid #cccccc",
                "color": "#191919"
            })
        }
    })
    $(".i7").blur(function(){
        if($(this).val()!=null){
            $("#firstA").css({
                "border":"1px solid #efefef",
                "color":"#b9b9b9"
            })
            $("#lastA").css({
                "border":"1px solid #cccccc",
                "color": "#191919"
            })
        }
    })
</script>
<script type="text/javascript">
    window.onload=function(){
        function z(str){//#box .cls  p
            if(str.charAt(0)=="#"){
                return document.getElementById(str.substring(1));
            }else if(str.charAt(0)=="."){
                return document.getElementsByClassName(str.substring(1));
            }else{
                return document.getElementsByTagName(str);
            }
        }	
        
        z("#lastA").onclick=function(){
            let xhr=new XMLHttpRequest();
            xhr.open("post","php/register.php",true);
            xhr.onreadystatechange=function(){
                if(xhr.readyState==4 && xhr.status==200){
                    
                    // console.log(xhr.responseText);
                    var str=xhr.responseText;
                    // console.log("str======"+str);
                    // console.log(str == 1);
                    if( str== 1){
                        alert("注册成功");
                        location.href="login.html";
                    }
                    else if(str=="-1"){
                        alert("用户名已存在");
                    } else{
                        alert("服务器出错");
                    }
                }
            }
            xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            let s="phonea="+z(".i1"
            )[0].value+"&pass="+z(".i4")[0].value;
            xhr.send(s);
        }
    }
</script>